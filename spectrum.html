
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Wall-Pressure Spectrum — Rozenberg et al. (2012)</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>

<style>
body {
    font-family: Arial, sans-serif;
    background: #f5f5f5;
    margin: 20px;
}

.container {
    max-width: 1000px;
    margin: auto;
    background: white;
    padding: 25px;
    border-radius: 8px;
    box-shadow: 0 3px 6px rgba(0,0,0,0.15);
}

h1 {
    text-align: center;
    margin-bottom: 5px;
}

.subtitle {
    text-align: center;
    color: #555;
    font-size: 14px;
    margin-bottom: 25px;
}

#chartContainer {
    height: 420px;
}

.slider-group {
    margin-top: 18px;
    padding: 12px;
    background: #fafafa;
    border-radius: 5px;
}

.slider-label {
    display: flex;
    justify-content: space-between;
    font-size: 14px;
}

.slider-value {
    font-weight: bold;
    color: #0055aa;
}

input[type="range"] {
    width: 100%;
}
</style>
</head>

<body>
<div class="container">

<h1>Wall-Pressure Spectrum</h1>
<div class="subtitle">
Compact-source model — Rozenberg et al. (2012), observer at 90°
</div>

<div id="chartContainer">
<canvas id="spectrumChart"></canvas>
</div>

<!-- Sliders -->
<div class="slider-group">
    <div class="slider-label">
        <span>Flow velocity <i>U</i> [m/s]</span>
        <span class="slider-value" id="valU">30</span>
    </div>
    <input type="range" id="sliderU" min="10" max="80" step="1" value="30">
</div>

<div class="slider-group">
    <div class="slider-label">
        <span>Pressure-gradient term <i>F</i>₁</span>
        <span class="slider-value" id="valF1">1.00</span>
    </div>
    <input type="range" id="sliderF1" min="0.5" max="2.5" step="0.05" value="1.0">
</div>

<div class="slider-group">
    <div class="slider-label">
        <span>Exponent <i>A</i>₁ = 3.7 + 1.5β<sub>c</sub></span>
        <span class="slider-value" id="valA1">1.00</span>
    </div>
    <input type="range" id="sliderA1" min="0.5" max="2.0" step="0.05" value="1.0">
</div>

</div>

<script>
/* ------------------------------------------------------
   FIXED MODEL PARAMETERS (Boundary-layer quantities)
------------------------------------------------------ */
const deltaStar = 0.002;   // displacement thickness δ* [m]
const Delta     = 8.0;     // Zagarola–Smits parameter δ / δ*
const RT        = 1.0;     // time-scale ratio

/* A2 definition from Rozenberg et al. */
const A2 = Math.min(3.19 / Math.sqrt(RT), 1.0);

/* ------------------------------------------------------
   Frequency array (angular frequency ω)
------------------------------------------------------ */
function logspace(start, stop, n) {
    const ls = Math.log10(start);
    const le = Math.log10(stop);
    return Array.from({length: n}, (_, i) =>
        Math.pow(10, ls + (le - ls) * i / (n - 1))
    );
}

const omega = logspace(1, 1e4, 500);

/* ------------------------------------------------------
   Wall-pressure spectrum φ_pp(ω)
------------------------------------------------------ */
function wallPressureSpectrum(omega, U, F1, A1) {

    /* Strouhal number: ω̃ = ω δ* / U */
    const omegaTilde = omega * deltaStar / U;

    const numerator =
        2.82 * Math.pow(Delta, 2) *
        Math.pow(6.13 * Math.pow(Delta, -0.75) + F1, A1) *
        (4.2 * (Math.PI / Delta) + 1.0) *
        Math.pow(omegaTilde, 2);

    const denominator =
        Math.pow(4.76 * Math.pow(omegaTilde, 0.75) + F1, A1) +
        Math.pow(8.8 * Math.pow(RT, -0.57) * omegaTilde, A2);

    return numerator / denominator;
}

function computeSpectrum(U, F1, A1) {
    return omega.map(w => wallPressureSpectrum(w, U, F1, A1));
}

/* ------------------------------------------------------
   Chart.js setup
------------------------------------------------------ */
const ctx = document.getElementById('spectrumChart').getContext('2d');

const spectrumChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: omega,
        datasets: [{
            label: 'φₚₚ(ω) U / (τ²ₘₐₓ δ*)',
            data: computeSpectrum(30, 1.0, 1.0),
            borderColor: '#0055aa',
            borderWidth: 2,
            pointRadius: 0
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
            x: {
                type: 'logarithmic',
                title: { display: true, text: 'Angular frequency ω' }
            },
            y: {
                type: 'logarithmic',
                title: { display: true, text: 'Normalised wall-pressure spectrum' }
            }
        },
        plugins: { legend: { display: false } }
    }
});

/* ------------------------------------------------------
   Slider interaction
------------------------------------------------------ */
function updatePlot() {
    const U  = parseFloat(sliderU.value);
    const F1 = parseFloat(sliderF1.value);
    const A1 = parseFloat(sliderA1.value);

    valU.textContent  = U.toFixed(0);
    valF1.textContent = F1.toFixed(2);
    valA1.textContent = A1.toFixed(2);

    spectrumChart.data.datasets[0].data = computeSpectrum(U, F1, A1);
    spectrumChart.update('none');
}

sliderU.oninput  = updatePlot;
sliderF1.oninput = updatePlot;
sliderA1.oninput = updatePlot;
</script>

</body>
</html>
